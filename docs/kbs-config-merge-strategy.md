# Generated Attributes vs User-configurable attributes in KbsConfig

This document explains what happens to generated attributes when they are modified in KbsConfig.

## Overview

The TrusteeConfig controller generates certain fields in KbsConfig, but some fields are left empty for user customization. The merge logic handles these differently.

## Field Categories

### 1. **Fields Generated by TrusteeConfig**
These fields are **always managed** by TrusteeConfig and will be overwritten:

- `KbsConfigMapName` - Main KBS configuration
- `KbsRvpsRefValuesConfigMapName` - RVPS reference values
- `KbsAuthSecretName` - Authentication secret
- `KbsServiceType` - Service type
- `KbsDeploymentType` - Deployment type (always set to AllInOneDeployment)
- `KbsResourcePolicyConfigMapName` - Resource policy
- `KbsAttestationPolicyConfigMapName` - Attestation policy (generated based on profile type)
- `TdxConfigSpec.KbsTdxConfigMapName` - TDX configuration
- `KbsHttpsKeySecretName` - HTTPS key secret (generated when `HttpsSpec.TlsSecretName` is set)
- `KbsHttpsCertSecretName` - HTTPS certificate secret (generated when `HttpsSpec.TlsSecretName` is set)

**Behavior**: During reconciliation, TrusteeConfig will **overwrite** any manual modifications to these field values (e.g., the ConfigMap or Secret names). This ensures that the controller maintains control over the resource naming and references. Importantly, while the field attributes are reset, the **actual content** of the referenced ConfigMaps and Secrets remains **preserved** and unchanged. This means any data you've added or modified within those resources will persist across reconciliation cycles.

### 2. **Fields NOT Generated by TrusteeConfig (User-Configurable)**

- `KbsDeploymentSpec.Replicas` - Replica count (TrusteeConfig default is 1)
- `KbsEnvVars` - Environment variables (merged with generated ones)
- `KbsSecretResources` - Additional secret resources
- `KbsLocalCertCacheSpec` - Local certificate cache
- `IbmSEConfigSpec` - IBM SE configuration

**Behavior**: These fields are **preserved** across TrusteeConfig reconciliation cycles. For example the user can safely add a new secret under `KbsSecretResources`.

## Related Documentation

For detailed information about when and how reconciliation occurs, including reconciliation loop behavior, see [Reconciliation Loop Behavior](./reconciliation-loop-behavior.md).
